<!DOCTYPE html>
<html>

<head>
  <script src="https://aframe.io/releases/0.8.2/aframe.min.js"></script>
  <script src="https://cdn.rawgit.com/donmccurdy/aframe-extras/v4.2.0/dist/aframe-extras.min.js"></script>
  <script src="https://cdn.rawgit.com/donmccurdy/aframe-physics-system/v3.2.0/dist/aframe-physics-system.js"></script>
  <script src="https://recast-api.donmccurdy.com/aframe-inspector-plugin-recast.js"></script>
  <link rel="stylesheet" href="styles.css">

</head>

<body id="fullscreen-wrapper" onclick="startGame()">
  <a-scene class="fullscreen" physics="gravity: -12.81" fog="type: linear; near: 2; far: 20; color: white" vr-mode-ui="enabled: false">

    <!-- light -->
    <a-entity light="type: hemisphere; color: #FFF; groundColor: #000; intensity: 1.9"></a-entity>

    <!-- floor -->
    <a-plane rotation="-90 0 0" width="400" height="400" color="#465" shadow="cast: false; receive: false;" material="roughness: 1"></a-plane>

    <!-- sky -->
    <a-sky color="#aabbcc"></a-sky>

    <a-collada-model src="/assets/models/ammo-box.dae" position="-2.2 0 2.8" rotation="0 95 0">
      <a-animation begin="click" attribute="position" from="-2.2 0 2.8"
                     to="-2.2 5 2.8" dur="2000" fill="both"></a-animation>
    </a-collada-model>

    <a-collada-model id="suspicious-rock" src="/assets/models/rock.dae" position="-9 0 -4" rotation="0 0 0">
      <a-animation begin="flip-rock" attribute="rotation" from="0 0 0"
                     to="0 0 90" dur="2000" fill="both"></a-animation>
    </a-collada-model>


    <a-collada-model src="/assets/models/trees.dae" position="0 -1.375 0"> </a-collada-model>
    <a-collada-model src="/assets/models/logs-rocks-grass.dae" position="0 -1.375 0"> </a-collada-model>

    <!-- <a-collada-model src="url(https://res.cloudinary.com/dauopf3r6/raw/upload/v1595642314/trees_jursnj.dae)" position="0 -1.375 0" static-body="shape:mesh"> </a-collada-model>
    <a-collada-model src="url(https://res.cloudinary.com/dauopf3r6/raw/upload/v1595642308/logs-rocks-grass_famdbc.dae)" position="0 -1.375 0"> </a-collada-model> -->

    <a-entity position="30 10 30" rotation="0 0 0">
        <a-light color="orange" intensity=".4">
        </a-light>
    </a-entity>

    <a-entity gltf-model="/assets/models/nav-mesh.glb" position="0 -1.38 0" nav-mesh></a-entity>

    <!-- Player -->
    <a-entity id="rig" movement-controls="constrainToNavMesh: true" position="0 0 0" rotation="0 250 0">
      <a-entity id="camera" camera position="0 1.6 0" look-controls="pointerLockEnabled: true;" rotation="-30 40 0">
        <a-entity cursor
            position="0 0 -1"
            geometry="primitive: ring; radiusInner: 0.02; radiusOuter: 0.03"
            material="color: black; shader: flat">
        </a-entity>
      </a-entity>
    </a-entity>

  </a-scene>

  <!-- intro overlay -->
  <div id="overlay-wrapper">
    <table id="overlay-dialog" id="custombutton">
      <tr>
        <td style="display:table-cell; vertical-align:middle">
          <h1 style="font-size: 3rem">Virtual Forest</h1>
          <p>Controls: WASD to move. Mouse to look around. Click to interact with objects in the game.</p>
          <p>Click anywhere on this page to begin.</p>
        </td>
      </tr>
      <tr style="height: 10%">
        <td>
          <p style="display:table-cell; vertical-align:middle">You can exit the game at any time by clicking the Esc key (upper left of keyboard).</p>
        </td>
      </tr>
    </table>
    <p class="esc-reminder">Press ESC to exit</p>
    <div class="compass-wrapper">
      <img id="compass" src="/assets/images/compass.png">
    </div>
  </div>

  <script src="game.js"></script>

</body>

</html>
